var opacities = new Array(data.points[0].fullData.x.length).fill(0.1); // Start with all opacities at 0.1
// Set the opacity of the points in the same group as the hovered point to 1 (highlight)
data.points[0].fullData.x.forEach(function(_, i) {
if(data.points[0].fullData.marker.color[i] === groupValue) {
opacities[i] = 1;
}
});
// Restyle the plot with the updated opacities
Plotly.restyle(el.id, {'marker.opacity': [opacities]}, [traceIndex]);
});
plotlyGraph.on('plotly_unhover', function(data) {
// Reset the opacity for all points when not hovering
var resetOpacities = new Array(data.points[0].fullData.x.length).fill(0.1); // Reset all opacities to 0.6
Plotly.restyle(el.id, {'marker.opacity': [resetOpacities]});
});
}
")
# Customize the layout if desired
p <- p %>% layout(title = 'ID over Time by File',
xaxis = list(title = 'Time'),
yaxis = list(title = 'ID'),
legend = list(orientation = 'h', x = 0, y = -0.3, xanchor = 'left', yanchor = 'bottom'),
hovermode = 'closest')
p
source("adm_main.R")
source("adm_helper.R")
source("adm_summary.R")
library(readxl)
library(dplyr)
library(plotly)
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/BIOCARD August 2021 internal"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"), , DATE_usr_list = c("date","VISITDATE","MRIDATE"))
df <- plot.files(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/BIOCARD August 2021 internal"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"), , DATE_usr_list = c("date","VISITDATE","MRIDATE"))
df <- plot.files(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
source("adm_main.R")
source("adm_helper.R")
source("adm_summary.R")
library(readxl)
library(dplyr)
library(plotly)
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/BIOCARD August 2021 internal"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"), , DATE_usr_list = c("date","VISITDATE","MRIDATE"))
df <- plot.files(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
source("adm_main.R")
source("adm_helper.R")
source("adm_summary.R")
library(readxl)
library(dplyr)
library(plotly)
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/BIOCARD August 2021 internal"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"), , DATE_usr_list = c("date","VISITDATE","MRIDATE"))
df <- plot.files(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
df
source("adm_main.R")
source("adm_helper.R")
source("adm_summary.R")
library(readxl)
library(dplyr)
library(plotly)
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/BIOCARD August 2021 internal"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"), , DATE_usr_list = c("date","VISITDATE","MRIDATE"))
df <- plot.files(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
df
source("adm_main.R")
source("adm_helper.R")
source("adm_summary.R")
library(readxl)
library(dplyr)
library(plotly)
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/BIOCARD August 2021 internal"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"), , DATE_usr_list = c("date","VISITDATE","MRIDATE"))
df <- plot.files(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
df$DATE <- as.Date(df$DATE)
df <- df %>% mutate(color = as.factor(FILE))
color_palette <- RColorBrewer::brewer.pal(length(unique(df$color)), "Set1")
color_map <- setNames(color_palette, levels(df$color))
# Use the color_map to map the factor levels to actual colors for plot_ly
df <- df %>% mutate(color_value = color_map[color])
# Create a hover text column with the file name
df <- df %>% mutate(hover_text = paste("File:", FILE))
# Now use this in plot_ly
p <- plot_ly(data = df, x = ~DATE, y = ~ID, type = 'scatter', mode = 'markers',
hoverinfo = 'text', # Display the hover text when hovering
text = ~hover_text, # Set the text that appears on hover
marker = list(size = 10, opacity = 0.6, color = ~color_value))
# Add a custom hover event to highlight the group (FILE)
p <- p %>% onRender("
function(el) {
var plotlyGraph = document.getElementById(el.id);
plotlyGraph.on('plotly_hover', function(data) {
// Find the index of the hovered data point
var hoverIndex = data.points[0].pointIndex;
console.log('Hover index data:', hoverIndex);
// Get the trace and group information for the hovered data point
var traceIndex = data.points[0].curveNumber;
var groupValue = data.points[0].fullData.marker.color[hoverIndex];
console.log('groupValue:', groupValue);
// Create an array to set opacities
var opacities = new Array(data.points[0].fullData.x.length).fill(0.1); // Start with all opacities at 0.1
// Set the opacity of the points in the same group as the hovered point to 1 (highlight)
data.points[0].fullData.x.forEach(function(_, i) {
if(data.points[0].fullData.marker.color[i] === groupValue) {
opacities[i] = 1;
}
});
// Restyle the plot with the updated opacities
Plotly.restyle(el.id, {'marker.opacity': [opacities]}, [traceIndex]);
});
plotlyGraph.on('plotly_unhover', function(data) {
// Reset the opacity for all points when not hovering
var resetOpacities = new Array(data.points[0].fullData.x.length).fill(0.1); // Reset all opacities to 0.6
Plotly.restyle(el.id, {'marker.opacity': [resetOpacities]});
});
}
")
# Customize the layout if desired
p <- p %>% layout(title = 'ID over Time by File',
xaxis = list(title = 'Time'),
yaxis = list(title = 'ID'),
legend = list(orientation = 'h', x = 0, y = -0.3, xanchor = 'left', yanchor = 'bottom'),
hovermode = 'closest')
p
df
source("adm_main.R")
source("adm_helper.R")
source("adm_summary.R")
library(readxl)
library(dplyr)
library(plotly)
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/BIOCARD August 2021 internal"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"), , DATE_usr_list = c("date","VISITDATE","MRIDATE"))
plot <- plot.files(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
plot
library(devtools)
install_github("Shijia1997/ADMerge")
library(ADMerge)
data_path = "ADNI data"
scr_table = get_src_table(path = data_path, ID_usr_list = ("RID"))
scr_table
plot.files(path = data_path, dict_src = scr_table)
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/BIOCARD August 2021 internal"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"), , DATE_usr_list = c("date","VISITDATE","MRIDATE"))
source("adm_main.R")
source("adm_helper.R")
source("adm_summary.R")
library(readxl)
library(dplyr)
library(plotly)
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/BIOCARD August 2021 internal"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"), , DATE_usr_list = c("date","VISITDATE","MRIDATE"))
plot <- plot.files(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
source("adm_main.R")
source("adm_helper.R")
source("adm_summary.R")
library(readxl)
library(dplyr)
library(plotly)
library(htmlwidgets)
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/BIOCARD August 2021 internal"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"), , DATE_usr_list = c("date","VISITDATE","MRIDATE"))
plot <- plot.files(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
plot
source("adm_main.R")
source("adm_helper.R")
source("adm_summary.R")
library(readxl)
library(dplyr)
library(plotly)
library(htmlwidgets)
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/BIOCARD August 2021 internal"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"), , DATE_usr_list = c("date","VISITDATE","MRIDATE"))
plot <- plot.files(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
source("adm_main.R")
source("adm_helper.R")
source("adm_summary.R")
library(readxl)
library(dplyr)
library(plotly)
library(htmlwidgets)
library(RColorBrewer)
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/BIOCARD August 2021 internal"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"), , DATE_usr_list = c("date","VISITDATE","MRIDATE"))
plot <- plot.files(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
install.packages("plotly")
install.packages("plotly")
install.packages("plotly")
source("adm_main.R")
source("adm_helper.R")
source("adm_summary.R")
library(readxl)
library(dplyr)
library(plotly)
library(htmlwidgets)
library(RColorBrewer)
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/BIOCARD August 2021 internal"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"), , DATE_usr_list = c("date","VISITDATE","MRIDATE"))
plot <- plot.files(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
source("adm_main.R")
source("adm_helper.R")
source("adm_summary.R")
library(readxl)
library(dplyr)
library(plotly)
library(htmlwidgets)
library(RColorBrewer)
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/BIOCARD August 2021 internal"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"), , DATE_usr_list = c("date","VISITDATE","MRIDATE"))
plot <- plot.files(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
plot
source("adm_main.R")
source("adm_helper.R")
source("adm_summary.R")
library(readxl)
library(dplyr)
library(plotly)
library(htmlwidgets)
library(RColorBrewer)
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/BIOCARD August 2021 internal"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"), , DATE_usr_list = c("date","VISITDATE","MRIDATE"))
plot <- plot.files(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
plot
source("adm_main.R")
source("adm_helper.R")
source("adm_summary.R")
library(readxl)
library(dplyr)
library(plotly)
library(htmlwidgets)
library(RColorBrewer)
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/BIOCARD August 2021 internal"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"), , DATE_usr_list = c("date","VISITDATE","MRIDATE"))
plot <- plot.files(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
plot
source("adm_main.R")
source("adm_helper.R")
source("adm_summary.R")
library(readxl)
library(dplyr)
library(plotly)
library(htmlwidgets)
library(RColorBrewer)
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/BIOCARD August 2021 internal"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"), , DATE_usr_list = c("date","VISITDATE","MRIDATE"))
plot <- plot.files(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
plot
source("adm_main.R")
source("adm_helper.R")
source("adm_summary.R")
library(readxl)
library(dplyr)
library(plotly)
library(htmlwidgets)
library(RColorBrewer)
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/BIOCARD August 2021 internal"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"), , DATE_usr_list = c("date","VISITDATE","MRIDATE"))
plot <- plot.files(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
plot
plot
plot
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/BIOCARD August 2021 internal"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"), , DATE_usr_list = c("date","VISITDATE","MRIDATE"))
plot <- plot.files(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
plot
source("adm_main.R")
source("adm_helper.R")
source("adm_summary.R")
library(readxl)
library(dplyr)
library(plotly)
library(htmlwidgets)
library(RColorBrewer)
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/BIOCARD August 2021 internal"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"), , DATE_usr_list = c("date","VISITDATE","MRIDATE"))
plot <- plot.files(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
plot
plot
source("adm_main.R")
source("adm_helper.R")
source("adm_summary.R")
library(readxl)
library(dplyr)
library(plotly)
library(htmlwidgets)
library(RColorBrewer)
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/BIOCARD August 2021 internal"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"), , DATE_usr_list = c("date","VISITDATE","MRIDATE"))
plot <- plot.files(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
plot
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/BIOCARD August 2021 internal"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"))
source("adm_helper.R")
source("adm_main.R")
source("adm_summary.R")
library(dplyr)
library(plotly)
library(htmlwidgets)
library(tidyr)
library(data.table)
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/BIOCARD August 2021 internal"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"))
source("adm_helper.R")
source("adm_main.R")
source("adm_summary.R")
library(dplyr)
library(plotly)
library(htmlwidgets)
library(tidyr)
library(data.table)
library(readxl)
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/BIOCARD August 2021 internal"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"))
plot <- plot.files_w_dropdown(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
plot
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/BIOCARD August 2021 internal"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"))
plot <- plot.files_w_dropdown(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
plot
plot <- plot.files_no_dropdown(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
plot
src_table
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"),DATE_usr_list = c("VISITDATE","MRIDATE"))
plot <- plot.files_no_dropdown(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
plot
source("adm_helper.R")
source("adm_main.R")
source("adm_summary.R")
library(dplyr)
library(plotly)
library(htmlwidgets)
library(tidyr)
library(data.table)
library(readxl)
plot <- plot.files_w_dropdown(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
plot
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/ADNI data"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("SUBJECT_ID"),DATE_usr_list = c("VISITDATE","MRIDATE"))
src_table
plot <- plot.files_w_dropdown(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
plot
src_table
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("RID"),DATE_usr_list = c("VISITDATE","MRIDATE"))
plot <- plot.files_w_dropdown(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
plot
library(lubridate)
path = "/Users/shijia.zhang/Desktop/ADNI/ADMerge/data/ADNI data"
src_table <- get_src_table(path = path, ID_pattern = "ID", ID_usr_list = c("RID"),DATE_usr_list = c("VISITDATE","MRIDATE"))
src_table
plot <- plot.files_w_dropdown(path, FILE_pattern = ".xlsx|.xls|.csv", dict_src = src_table)
plot
build()
build()
library(devtools)
install_github("Shijia1997/ADMerge")
library(ADMerge)
data_path = "ADNI data"
scr_table = get_src_table(path = data_path, ID_usr_list = ("RID"))
plot.files(path = data_path, dict_src = scr_table)
build()
library(devtools)
install_github("Shijia1997/ADMerge",upgrade = "never")
library(ADMerge)
library(devtools)
install_github("Shijia1997/ADMerge",upgrade = "never")
library(ADMerge)
data_path = "ADNI data"
scr_table = get_src_table(path = data_path, ID_usr_list = ("RID"))
plot.files(path = data_path, dict_src = scr_table)
library(tidyr)
plot.files(path = data_path, dict_src = scr_table)
build()
library(devtools)
install_github("Shijia1997/ADMerge",upgrade = "never")
library(ADMerge)
library(tidyr)
data_path = "ADNI data"
scr_table = get_src_table(path = data_path, ID_usr_list = ("RID"))
plot.files(path = data_path, dict_src = scr_table)
library(devtools)
install_github("Shijia1997/ADMerge",upgrade = "never")
library(ADMerge)
library(tidyr)
data_path = "ADNI data"
scr_table = get_src_table(path = data_path, ID_usr_list = ("RID"))
plot.files(path = data_path, dict_src = scr_table)
library(devtools)
install_github("Shijia1997/ADMerge",upgrade = "never")
library(ADMerge)
library(tidyr)
data_path = "ADNI data"
scr_table = get_src_table(path = data_path, ID_usr_list = ("RID"))
plot.files(path = data_path, dict_src = scr_table)
library(devtools)
install_github("Shijia1997/ADMerge",upgrade = "never")
library(ADMerge)
library(tidyr)
library(devtools)
install_github("Shijia1997/ADMerge",upgrade = "never")
library(ADMerge)
library(tidyr)
data_path = "ADNI data"
scr_table = get_src_table(path = data_path, ID_usr_list = ("RID"))
plot.files(path = data_path, dict_src = scr_table)
library(devtools)
install_github("Shijia1997/ADMerge",upgrade = "never")
library(ADMerge)
library(tidyr)
library(devtools)
install_github("Shijia1997/ADMerge",upgrade = "never")
library(ADMerge)
library(tidyr)
data_path = "ADNI data"
scr_table = get_src_table(path = data_path, ID_usr_list = ("RID"))
data_path = "ADNI data"
scr_table = get_src_table(path = data_path, ID_usr_list = ("RID"))
library(devtools)
install_github("Shijia1997/ADMerge",upgrade = "never")
library(ADMerge)
library(tidyr)
data_path = "ADNI data"
scr_table = get_src_table(path = data_path, ID_usr_list = ("RID"))
library(devtools)
install_github("Shijia1997/ADMerge",upgrade = "never")
library(ADMerge)
library(tidyr)
data_path = "ADNI data"
scr_table = get_src_table(path = data_path, ID_usr_list = ("RID"))
plot.files(path = data_path, dict_src = scr_table)
library(devtools)
install_github("Shijia1997/ADMerge",upgrade = "never")
library(ADMerge)
library(tidyr)
data_path = "ADNI data"
scr_table = get_src_table(path = data_path, ID_usr_list = ("RID"))
plot.files(path = data_path, dict_src = scr_table)
build()
library(devtools)
install_github("Shijia1997/ADMerge",upgrade = "never")
library(ADMerge)
library(tidyr)
data_path = "ADNI data"
scr_table = get_src_table(path = data_path, ID_usr_list = ("RID"))
plot.files(path = data_path, dict_src = scr_table)
library(devtools)
install_github("Shijia1997/ADMerge",upgrade = "never")
library(ADMerge)
library(tidyr)
data_path = "ADNI data"
scr_table = get_src_table(path = data_path, ID_usr_list = ("RID"))
plot.files(path = data_path, dict_src = scr_table)
library(devtools)
install_github("Shijia1997/ADMerge",upgrade = "never")
library(ADMerge)
library(tidyr)
data_path = "ADNI data"
scr_table = get_src_table(path = data_path, ID_usr_list = ("RID"))
plot.files(path = data_path, dict_src = scr_table)
library(devtools)
install_github("Shijia1997/ADMerge",upgrade = "never")
library(ADMerge)
library(tidyr)
data_path = "ADNI data"
scr_table = get_src_table(path = data_path, ID_usr_list = ("RID"))
plot.files(path = data_path, dict_src = scr_table)
library(devtools)
install_github("Shijia1997/ADMerge",upgrade = "never")
library(ADMerge)
library(tidyr)
data_path = "ADNI data"
scr_table = get_src_table(path = data_path, ID_usr_list = ("RID"))
plot.files(path = data_path, dict_src = scr_table)
scr_table
scr_table = get_src_table(path = data_path, ID_usr_list = c("RID"),DATE_usr_list = c("VISDATE","EXAMDATE"))
scr_table
scr_table = get_src_table(path = data_path, ID_usr_list = c("RID"),DATE_usr_list = c("VISDATE","EXAMDATE"))
print(scr_table)
plot.files(path = data_path, dict_src = scr_table)
library(devtools)
install_github("Shijia1997/ADMerge",upgrade = "never")
library(ADMerge)
library(tidyr)
data_path = "ADNI data"
scr_table = get_src_table(path = data_path, ID_usr_list = c("RID"),DATE_usr_list = c("VISDATE","EXAMDATE"))
print(scr_table)
plot.files(path = data_path, dict_src = scr_table)
